{% extends "layouts/base.html" %}

{% block title %} Presentation {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
<style>
  .slidecontainer {
    width: 100%;
  }
  
  .slider {
    -webkit-appearance: none;
    width: 100%;
    height: 25px;
    background: #d3d3d3;
    outline: none;
    opacity: 0.7;
    -webkit-transition: .2s;
    transition: opacity .2s;
  }
  
  .slider:hover {
    opacity: 1;
  }
  
  .slider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    background: #4CAF50;
    cursor: pointer;
  }
  
  .slider::-moz-range-thumb {
    width: 25px;
    height: 25px;
    background: #4CAF50;
    cursor: pointer;
  }
  </style>{% endblock stylesheets %}

{% block content %}



<section class="section section bg-primary pb-11 pb-lg-12 text-white overflow-hidden z-2">
    <div class="container z-2">
        <div class="row justify-content-center text-center pt-6 pb-3" role="banner">
            <div class="col-12 col-md-8">
                <h1 class="display-1 font-weight-light mb-3">Emotion Tracker</h1>
        
        <p>Here is where you log your emotions. Tell us your feelings! </p>
            </div>
        </div>
        <canvas id="myChart">
          
          
          <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

        </canvas>

    </div>
</section>

<div class="section section-lg pb-5">
    <div class="container">
      <h1>Slide each value to match how you feel:</h1>
      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange">
        <p>Happy: <span id="demo"></span></p>
      </div> 

      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange1">
        <p>Calm: <span id="demo1"></span></p>
      </div> 
      
      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange2">
        <p>Opptomistic: <span id="demo2"></span></p>
      </div> 

      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange3">
        <p>Anxious: <span id="demo3"></span></p>
      </div> 

      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange4">
        <p>Sad: <span id="demo4"></span></p>
      </div> 

      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange5">
        <p>Stressed: <span id="demo5"></span></p>
      </div> 

      <div class="slidecontainer">
        <input type="range" min="0" max="100" value="0" class="slider" id="myRange6">
        <p>Angry: <span id="demo6"></span></p>
      </div> 

      <div>
        <button type="button" class="btn btn-primary" onclick="update(output,output1,output2,output3,output4,output5,output6,slider,slider1,slider2,slider3,slider4,slider5,slider6)">Save</button>
      </div>

    </div>
</div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->

{% block javascripts %}

<script>

var slider = document.getElementById("myRange");
var slider1 = document.getElementById("myRange1");
var slider2 = document.getElementById("myRange2");
var slider3 = document.getElementById("myRange3");
var slider4 = document.getElementById("myRange4");
var slider5 = document.getElementById("myRange5");
var slider6 = document.getElementById("myRange6");

var output = document.getElementById("demo");
var output1 = document.getElementById("demo1");
var output2 = document.getElementById("demo2");
var output3 = document.getElementById("demo3");
var output4 = document.getElementById("demo4");
var output5 = document.getElementById("demo5");
var output6 = document.getElementById("demo6");

output.innerHTML = slider.value;
output1.innerHTML = slider1.value;
output2.innerHTML = slider2.value;
output3.innerHTML = slider3.value;
output4.innerHTML = slider4.value;
output5.innerHTML = slider5.value;
output6.innerHTML = slider6.value;

var w = slider.oninput = function Happy() {
  output.innerHTML = this.value;
  
  
}

slider1.oninput = function Calm() {
  output1.innerHTML = this.value;
}

slider2.oninput = function Optimistic() {
  output2.innerHTML = this.value;


  
}

slider3.oninput = function Anxious() {
  output3.innerHTML = this.value;
  
}

slider4.oninput = function Sad() {
  output4.innerHTML = this.value;
  
}


function update(output,output1,output2,output3,output4,output5,output6,slider,slider1,slider2,slider3,slider4,slider5,slider6){
$.ajax({
            method: 'post',
            url: '/process',
              type:'POST',
               traditional:true,
                    data:{
                        output:slider.value,
                        output1:slider1.value,
                        output2:slider2.value,
                        output3:slider3.value,
                        output4:slider4.value,
                        output5:slider5.value,
                        output6:slider6.value
                            }
       })
       return 0
}

var ctx = document.getElementById('myChart').getContext('2d');
var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {
        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
        datasets: [{
            label: 'Happy',
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 99, 132, 1)', 
            data: w,
        }, {
            label: 'Calm',
            backgroundColor:'rgba(54, 162, 235, 0.2)',
            borderColor:'rgba(54, 162, 235, 1)',  
            data: output1.innerHTML, 
        }, {
            label: 'Optimistic',
            backgroundColor:'rgba(0, 210, 217, 0.2)',
            borderColor:'rgba(0, 210, 217, 1)',  
            data: output2.innerHTML, 
        },{
            label: 'Anxious',
            backgroundColor:'rgba(255, 234, 0, 0.2)',
            borderColor:'rgba(255, 234, 0, 1)',  
            data: output3.innerHTML, 
        }, {
            label: 'Sad',
            backgroundColor:'rgba(85, 0, 255, 0.2)',
            borderColor:'rgba(85, 0, 255, 1)',  
            data: output4.innerHTML, 
        },{
            label: 'Stressed',
            backgroundColor:'rgba(255, 83, 64, 0.2)',
            borderColor:'rgba(255, 83, 64, 1)',  
            data: output5.innerHTML, 
        },{
            label: 'Angry',
            backgroundColor:'rgba(140, 255, 102, 0.2)',
            borderColor:'rgba(140, 255, 102, 1)',  
            data: output6.innerHTML, 
        },
      ]

    },

    // Configuration options go here
    options: {}
});

function updateChart(){
  chart.data.datasets[0].data = w;
  chart.data.datasets[1].data = Calm();
  chart.data.datasets[2].data = Optimistic();
  chart.data.datasets[3].data = Anxious();
  chart.data.datasets[4].data = Sad();
  chart.data.datasets[5].data = Stressed();
  chart.data.datasets[6].data = Angry();

  chart.update();
}

const button = document.querySelector('button');

button.addEventListener('click', event => {
 update(output,output,output2,output3,output4,output5,output6,slider,slider1,slider2,slider3,slider4,slider5,slide)
 
});

</script>

{% endblock javascripts %}
